<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'">
    <title>Floatnote</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Focus border overlay -->
        <div id="focus-border"></div>

        <!-- Size toolbar (left) -->
        <div id="size-toolbar">
            <div class="dropdown-container">
                <button id="size-toggle" class="tool-btn" title="Window size">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"/>
                    </svg>
                </button>
                <div class="dropdown-menu">
                    <button class="dropdown-item" data-size="sm">
                        <span class="size-label">SM</span>
                        <span class="size-desc">33% × 50%</span>
                    </button>
                    <button class="dropdown-item active" data-size="md">
                        <span class="size-label">MD</span>
                        <span class="size-desc">33% × 100%</span>
                    </button>
                    <button class="dropdown-item" data-size="lg">
                        <span class="size-label">LG</span>
                        <span class="size-desc">100% × 100%</span>
                    </button>
                </div>
            </div>

            <label class="pin-toggle" title="Keep window on top">
                <input type="checkbox" id="pin-checkbox" checked>
                <svg class="pin-icon" viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"/>
                </svg>
            </label>
        </div>

        <!-- Main toolbar (right) -->
        <div id="toolbar">
            <div class="toolbar-group">
                <button id="select-mode" class="tool-btn" title="Select mode (V)">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                        <path d="M4 2l14 11-6 .5 3.5 7.5-2.5 1-3.5-7.5L4 19V2z"/>
                    </svg>
                </button>
                <button id="draw-mode" class="tool-btn active" title="Draw mode (B)">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                        <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                    </svg>
                </button>
                <button id="text-mode" class="tool-btn" title="Text mode (T)">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                        <path d="M5 4v3h5.5v12h3V7H19V4z"/>
                    </svg>
                </button>
            </div>

            <div class="toolbar-divider"></div>

            <div class="dropdown-container">
                <button id="color-toggle" class="tool-btn color-swatch-btn" title="Color">
                    <span class="current-color" style="background: #ffffff"></span>
                </button>
                <div class="dropdown-menu color-dropdown">
                    <div class="color-grid">
                        <button class="color-btn active" data-color="#ffffff" style="background: #ffffff"></button>
                        <button class="color-btn" data-color="#1a1a1a" style="background: #1a1a1a"></button>
                        <button class="color-btn" data-color="#ef4444" style="background: #ef4444"></button>
                        <button class="color-btn" data-color="#f97316" style="background: #f97316"></button>
                        <button class="color-btn" data-color="#eab308" style="background: #eab308"></button>
                        <button class="color-btn" data-color="#22c55e" style="background: #22c55e"></button>
                        <button class="color-btn" data-color="#3b82f6" style="background: #3b82f6"></button>
                        <button class="color-btn" data-color="#a855f7" style="background: #a855f7"></button>
                        <button class="color-btn" data-color="#ec4899" style="background: #ec4899"></button>
                        <button class="color-btn" data-color="#06b6d4" style="background: #06b6d4"></button>
                        <button class="color-btn" data-color="#84cc16" style="background: #84cc16"></button>
                        <button class="color-btn" data-color="#f43f5e" style="background: #f43f5e"></button>
                    </div>
                </div>
            </div>

            <div class="dropdown-container">
                <button id="stroke-toggle" class="tool-btn" title="Stroke size">
                    <span class="current-stroke"></span>
                </button>
                <div class="dropdown-menu stroke-dropdown">
                    <button class="stroke-option" data-width="2">
                        <span class="stroke-dot" style="width: 4px; height: 4px"></span>
                        <span>Fine</span>
                    </button>
                    <button class="stroke-option active" data-width="4">
                        <span class="stroke-dot" style="width: 8px; height: 8px"></span>
                        <span>Medium</span>
                    </button>
                    <button class="stroke-option" data-width="8">
                        <span class="stroke-dot" style="width: 12px; height: 12px"></span>
                        <span>Thick</span>
                    </button>
                    <button class="stroke-option" data-width="12">
                        <span class="stroke-dot" style="width: 16px; height: 16px"></span>
                        <span>Heavy</span>
                    </button>
                </div>
            </div>

            <div class="toolbar-divider"></div>

            <button id="clear-btn" class="tool-btn danger" title="Clear all">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
            </button>
        </div>

        <!-- Drag handle -->
        <div id="drag-handle" title="Drag to move"></div>

        <!-- Left edge resize handle -->
        <div id="left-resize-handle" title="Drag to resize"></div>

        <!-- Canvas for drawing -->
        <canvas id="draw-canvas"></canvas>

        <!-- Container for text items -->
        <div id="text-container"></div>

        <!-- Settings panel -->
        <div id="settings-panel" class="settings-panel">
            <div class="settings-header">
                <h2>Settings</h2>
                <button id="settings-close" class="settings-close-btn">✕</button>
            </div>
            <div class="settings-content">
                <div class="settings-section">
                    <h3>Gestures</h3>
                    <label class="settings-toggle">
                        <span>Pinch to zoom</span>
                        <input type="checkbox" id="setting-pinch-zoom" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <label class="settings-toggle">
                        <span>Two-finger pan</span>
                        <input type="checkbox" id="setting-pan" checked>
                        <span class="toggle-slider"></span>
                    </label>
                    <label class="settings-toggle">
                        <span>Rotate gesture</span>
                        <input type="checkbox" id="setting-rotate" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-section">
                    <h3>Appearance</h3>
                    <div class="settings-bg-options">
                        <span class="settings-label">Background</span>
                        <div class="bg-option-group">
                            <label class="bg-option">
                                <input type="radio" name="bg-mode" value="transparent" checked>
                                <span class="bg-option-box transparent"></span>
                                <span>Clear</span>
                            </label>
                            <label class="bg-option">
                                <input type="radio" name="bg-mode" value="blur">
                                <span class="bg-option-box blur"></span>
                                <span>Blur</span>
                            </label>
                            <label class="bg-option">
                                <input type="radio" name="bg-mode" value="dark">
                                <span class="bg-option-box dark"></span>
                                <span>Dark</span>
                            </label>
                        </div>
                    </div>
                    <label class="settings-toggle">
                        <span>Show zoom controls</span>
                        <input type="checkbox" id="setting-zoom-controls" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-section">
                    <h3>Behavior</h3>
                    <label class="settings-toggle">
                        <span>Always open with clean slate</span>
                        <input type="checkbox" id="setting-clean-slate">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="settings-section">
                    <h3>Keyboard Shortcuts</h3>
                    <div class="shortcuts-list">
                        <div class="shortcut-item"><span>Toggle Floatnote</span><kbd>⌘⇧G</kbd></div>
                        <div class="shortcut-item"><span>Quick Toggle</span><kbd>⌥Space</kbd></div>
                        <div class="shortcut-item"><span>Quick Toggle</span><kbd>⌃`</kbd></div>
                        <div class="shortcut-item"><span>Settings</span><kbd>⌘,</kbd></div>
                        <div class="shortcut-item"><span>Undo</span><kbd>⌘Z</kbd></div>
                        <div class="shortcut-item"><span>Redo</span><kbd>⌘⇧Z</kbd></div>
                        <div class="shortcut-item"><span>Select all</span><kbd>⌘A</kbd></div>
                        <div class="shortcut-item"><span>Select mode</span><kbd>V</kbd></div>
                        <div class="shortcut-item"><span>Draw mode</span><kbd>B</kbd></div>
                        <div class="shortcut-item"><span>Text mode</span><kbd>T</kbd></div>
                        <div class="shortcut-item"><span>Copy</span><kbd>⌘C</kbd></div>
                        <div class="shortcut-item"><span>Paste</span><kbd>⌘V</kbd></div>
                        <div class="shortcut-item"><span>Delete</span><kbd>D</kbd></div>
                        <div class="shortcut-item"><span>Zoom in</span><kbd>⌘+</kbd></div>
                        <div class="shortcut-item"><span>Zoom out</span><kbd>⌘-</kbd></div>
                        <div class="shortcut-item"><span>Reset zoom</span><kbd>⌘0</kbd></div>
                        <div class="shortcut-item"><span>Previous note</span><kbd>[</kbd></div>
                        <div class="shortcut-item"><span>Next note</span><kbd>]</kbd></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
