<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'"
        />
        <title>Floatnote</title>
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div id="app">
            <!-- Focus border overlay -->
            <div id="focus-border"></div>

            <!--Window edge drag handle -->
            <div id="window-top-edge-drag-handle"></div>

            <!-- Size toolbar (left) -->
            <div id="size-toolbar">
                <div class="dropdown-container">
                    <button
                        id="size-toggle"
                        class="tool-btn"
                        title="Window size"
                    >
                        <svg
                            viewBox="0 0 24 24"
                            width="18"
                            height="18"
                            fill="currentColor"
                        >
                            <path
                                d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"
                            />
                        </svg>
                    </button>
                    <div class="dropdown-menu">
                        <button class="dropdown-item" data-size="sm">
                            <span class="size-label">SM</span>
                            <span class="size-desc">33% × 50%</span>
                        </button>
                        <button class="dropdown-item active" data-size="md">
                            <span class="size-label">MD</span>
                            <span class="size-desc">33% × 100%</span>
                        </button>
                        <button class="dropdown-item" data-size="lg">
                            <span class="size-label">LG</span>
                            <span class="size-desc">100% × 100%</span>
                        </button>
                    </div>
                </div>

                <label class="pin-toggle" title="Keep window on top">
                    <input type="checkbox" id="pin-checkbox" checked />
                    <svg
                        class="pin-icon"
                        viewBox="0 0 24 24"
                        width="16"
                        height="16"
                        fill="currentColor"
                    >
                        <path
                            d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"
                        />
                    </svg>
                </label>

                <button id="freeze-btn" class="tool-btn" title="Freeze view (F)">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0110 0v4"/>
                    </svg>
                </button>
            </div>

            <!-- Main toolbar (right) -->
            <div id="toolbar">
                <div class="toolbar-group">
                    <button
                        id="select-mode"
                        class="tool-btn"
                        title="Select mode (V)"
                    >
                        <svg
                            viewBox="0 0 24 24"
                            width="18"
                            height="18"
                            fill="currentColor"
                        >
                            <path
                                d="M4 2l14 11-6 .5 3.5 7.5-2.5 1-3.5-7.5L4 19V2z"
                            />
                        </svg>
                    </button>
                    <button
                        id="draw-mode"
                        class="tool-btn active"
                        title="Draw mode (B)"
                    >
                        <svg
                            viewBox="0 0 24 24"
                            width="18"
                            height="18"
                            fill="currentColor"
                        >
                            <path
                                d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
                            />
                        </svg>
                    </button>
                    <button
                        id="text-mode"
                        class="tool-btn"
                        title="Text mode (T)"
                    >
                        <svg
                            viewBox="0 0 24 24"
                            width="18"
                            height="18"
                            fill="currentColor"
                        >
                            <path d="M5 4v3h5.5v12h3V7H19V4z" />
                        </svg>
                    </button>
                </div>

                <div class="dropdown-container">
                    <button id="shape-toggle" class="tool-btn" title="Shapes (S)">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                        </svg>
                    </button>
                    <div class="dropdown-menu shape-dropdown">
                        <button class="shape-option" data-shape="rectangle">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="5" width="18" height="14" rx="1"/></svg>
                            <span>Rectangle</span>
                        </button>
                        <button class="shape-option" data-shape="circle">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="9"/></svg>
                            <span>Circle</span>
                        </button>
                        <button class="shape-option" data-shape="triangle">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3L22 21H2z"/></svg>
                            <span>Triangle</span>
                        </button>
                        <button class="shape-option" data-shape="line">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="20" x2="20" y2="4"/></svg>
                            <span>Line</span>
                        </button>
                        <button class="shape-option" data-shape="arrow">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="20" x2="20" y2="4"/><polyline points="10,4 20,4 20,14"/></svg>
                            <span>Arrow</span>
                        </button>
                    </div>
                </div>

                <div class="toolbar-divider"></div>

                <div class="dropdown-container">
                    <button
                        id="color-toggle"
                        class="tool-btn color-swatch-btn"
                        title="Color"
                    >
                        <span
                            class="current-color"
                            style="background: #ffffff"
                        ></span>
                    </button>
                    <div class="dropdown-menu color-dropdown">
                        <div class="color-grid">
                            <button
                                class="color-btn active"
                                data-color="#ffffff"
                                style="background: #ffffff"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#1a1a1a"
                                style="background: #1a1a1a"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#ef4444"
                                style="background: #ef4444"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#f97316"
                                style="background: #f97316"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#eab308"
                                style="background: #eab308"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#22c55e"
                                style="background: #22c55e"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#3b82f6"
                                style="background: #3b82f6"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#a855f7"
                                style="background: #a855f7"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#ec4899"
                                style="background: #ec4899"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#06b6d4"
                                style="background: #06b6d4"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#84cc16"
                                style="background: #84cc16"
                            ></button>
                            <button
                                class="color-btn"
                                data-color="#f43f5e"
                                style="background: #f43f5e"
                            ></button>
                        </div>
                    </div>
                </div>

                <div class="dropdown-container">
                    <button
                        id="stroke-toggle"
                        class="tool-btn"
                        title="Stroke size"
                    >
                        <span class="current-stroke"></span>
                    </button>
                    <div class="dropdown-menu stroke-dropdown">
                        <button class="stroke-option" data-width="2">
                            <span
                                class="stroke-dot"
                                style="width: 4px; height: 4px"
                            ></span>
                            <span>Fine</span>
                        </button>
                        <button class="stroke-option active" data-width="4">
                            <span
                                class="stroke-dot"
                                style="width: 8px; height: 8px"
                            ></span>
                            <span>Medium</span>
                        </button>
                        <button class="stroke-option" data-width="8">
                            <span
                                class="stroke-dot"
                                style="width: 12px; height: 12px"
                            ></span>
                            <span>Thick</span>
                        </button>
                        <button class="stroke-option" data-width="12">
                            <span
                                class="stroke-dot"
                                style="width: 16px; height: 16px"
                            ></span>
                            <span>Heavy</span>
                        </button>
                    </div>
                </div>

                <div class="toolbar-divider"></div>

                <button
                    id="clear-btn"
                    class="tool-btn danger"
                    title="Clear all"
                >
                    <svg
                        viewBox="0 0 24 24"
                        width="18"
                        height="18"
                        fill="currentColor"
                    >
                        <path
                            d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"
                        />
                    </svg>
                </button>
            </div>

            <!-- Drag handle -->
            <div id="drag-handle" title="Drag to move"></div>

            <!-- Left edge resize handle -->
            <div id="left-resize-handle" title="Drag to resize"></div>

            <!-- Canvas for drawing -->
            <canvas id="draw-canvas"></canvas>

            <!-- Container for text items -->
            <div id="text-container"></div>

            <!-- Selection rectangle overlay -->
            <div id="selection-rect"></div>

            <!-- Pagination island (right side) -->
            <div id="pagination-island">
                <button
                    id="prev-note"
                    class="pagination-btn"
                    title="Previous note ([)"
                >
                    <svg
                        viewBox="0 0 24 24"
                        width="16"
                        height="16"
                        fill="currentColor"
                    >
                        <path
                            d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"
                        />
                    </svg>
                </button>
                <span id="note-counter">1/1</span>
                <button
                    id="next-note"
                    class="pagination-btn"
                    title="Next note (])"
                >
                    <svg
                        viewBox="0 0 24 24"
                        width="16"
                        height="16"
                        fill="currentColor"
                    >
                        <path
                            d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"
                        />
                    </svg>
                </button>
                <div class="toolbar-divider"></div>
                <button
                    id="new-note"
                    class="pagination-btn"
                    title="New note (N)"
                >
                    <svg
                        viewBox="0 0 24 24"
                        width="16"
                        height="16"
                        fill="currentColor"
                    >
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                    </svg>
                </button>
            </div>

            <!-- Settings panel -->
            <div id="settings-panel" class="settings-panel">
                <div class="settings-header">
                    <h2>Settings</h2>
                    <button id="settings-close" class="settings-close-btn">
                        ✕
                    </button>
                </div>
                <div class="settings-content">
                    <div class="settings-section">
                        <h3>Gestures</h3>
                        <label class="settings-toggle">
                            <span>Pinch to zoom</span>
                            <input
                                type="checkbox"
                                id="setting-pinch-zoom"
                                checked
                            />
                            <span class="toggle-slider"></span>
                        </label>
                        <label class="settings-toggle">
                            <span>Two-finger pan</span>
                            <input type="checkbox" id="setting-pan" checked />
                            <span class="toggle-slider"></span>
                        </label>
                        <label class="settings-toggle">
                            <span>Rotate gesture</span>
                            <input
                                type="checkbox"
                                id="setting-rotate"
                                checked
                            />
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-section">
                        <h3>Appearance</h3>
                        <div class="settings-slider">
                            <span class="settings-label">Active Opacity</span>
                            <input
                                type="range"
                                id="setting-active-opacity"
                                min="0"
                                max="100"
                                value="10"
                            />
                            <span class="slider-value" id="active-opacity-value"
                                >10%</span
                            >
                        </div>
                        <div class="settings-slider">
                            <span class="settings-label">Inactive Opacity</span>
                            <input
                                type="range"
                                id="setting-inactive-opacity"
                                min="0"
                                max="100"
                                value="10"
                            />
                            <span
                                class="slider-value"
                                id="inactive-opacity-value"
                                >10%</span
                            >
                        </div>
                        <label class="settings-toggle">
                            <span>Show zoom controls</span>
                            <input
                                type="checkbox"
                                id="setting-zoom-controls"
                                checked
                            />
                            <span class="toggle-slider"></span>
                        </label>
                        <label class="settings-toggle">
                            <span>Hide border when inactive</span>
                            <input
                                type="checkbox"
                                id="setting-hide-unfocused-border"
                            />
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-section">
                        <h3>Behavior</h3>
                        <label class="settings-toggle">
                            <span>Always open with clean slate</span>
                            <input type="checkbox" id="setting-clean-slate" />
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-section">
                        <h3>Storage</h3>
                        <label class="settings-toggle">
                            <span>Auto-save notes to ~/.floatnote</span>
                            <input
                                type="checkbox"
                                id="setting-auto-save-folder"
                            />
                            <span class="toggle-slider"></span>
                        </label>
                        <button id="open-folder-btn" class="settings-btn">
                            Open Notes Folder
                        </button>
                    </div>
                    <div class="settings-section">
                        <h3>Keyboard Shortcuts</h3>
                        <div class="shortcuts-list">
                            <div class="shortcut-item">
                                <span>Toggle Floatnote</span><kbd>⌘⇧G</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Quick Toggle</span><kbd>⌥Space</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Settings</span><kbd>⌘,</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Toggle pin</span><kbd>⌘P</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Undo</span><kbd>⌘Z</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Redo</span><kbd>⌘⇧Z</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Select all</span><kbd>⌘A</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Select mode</span><kbd>V</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Draw mode</span><kbd>B</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Text mode</span><kbd>T</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Copy</span><kbd>⌘C</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Paste</span><kbd>⌘V</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Delete</span><kbd>D</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Export PNG</span><kbd>⌘S</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Zoom in</span><kbd>⌘+</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Zoom out</span><kbd>⌘-</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Reset view</span><kbd>⌘0</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Previous note</span><kbd>← or [</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Next note</span><kbd>→ or ]</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>New note</span><kbd>N</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Small size</span><kbd>1</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Medium size</span><kbd>2</kbd>
                            </div>
                            <div class="shortcut-item">
                                <span>Large size</span><kbd>3</kbd>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="renderer.js"></script>
    </body>
</html>
